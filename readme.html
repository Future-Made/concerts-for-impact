<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.22.2">
    <meta name="project" content="tune v0.1.0">
    <title>Tune â€” tune v0.1.0</title>
    <link rel="stylesheet" href="dist/elixir-d678dad126d82ddc061f.css" />
    <script src="dist/sidebar_items-1055432d0d.js"></script>
      <script src="docs_config.js"></script>
    <script async src="dist/app-0103364119015b97e56c.js"></script>
  </head>
  <body data-type="extras">
    <script>try { if(localStorage.getItem('night-mode') === 'true') document.body.className += ' night-mode'; } catch (e) { }</script>
<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button">
      <span class="icon-cross" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" id="search-list" class="search-input" placeholder="Search..." aria-label="Search" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName">
tune      </a>
      <h2 class="sidebar-projectVersion">
        v0.1.0
      </h2>
    </div>
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

      <li><a id="modules-list" href="#full-list">Modules</a></li>

  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>Tune</h1><p>Tune is a Spotify browser and remote application with a focus on performance
and integration with other services.</p><p>You can see it in action at <a href="https://tune.fullyforged.com">https://tune.fullyforged.com</a>.</p><h1>Scope and features</h1><p>In many ways Tune copies the official Spotify application: many views (e.g.
search or details for artists and albums) are tightly based on the equivalent
sections in the Spotify application. This is an intentional choice aimed at
reducing friction between applications.</p><p>Tune differs in these areas:</p><ul><li>Performance: Tune is extremely light, as for the most part is a
server-rendered application, which makes it suitable to use on a wide range
of devices and operating systems (think Linux on a Raspberry PI). Most of its
functionality works without JavaScript and is exposed via a proper URL.</li><li>Integration: Tune tries to connect items like artists, albums or songs to
other sources of information, so that for example you can use convenient
links to read the history of a band on Wikipedia.</li><li>Recommendations: Tune offers suggestions based on a combination of what's
provided by Spotify and some custom logic (loosely based on what you've been
listening in a specific time period). The logic is an almost direct porting of
how I search for new music, so it might not work for you.</li></ul><h1>Keyboard shortcuts</h1><ul><li>&lt;kbd&gt;Space&lt;/kbd&gt;: Play/Pause</li><li>&lt;kbd&gt;a&lt;/kbd&gt;: Prev</li><li>&lt;kbd&gt;d&lt;/kbd&gt;: Next</li><li>&lt;kbd&gt;w&lt;/kbd&gt;: Volume up</li><li>&lt;kbd&gt;s&lt;/kbd&gt;: Volume down</li><li>&lt;kbd&gt;/&lt;/kbd&gt;: Focus search input</li></ul><h1>Free subscription limitations</h1><p>Due to limitations imposed by Spotify, users with free subscriptions cannot use the embedded
audio player, nor they can control other devices via Tune's UI. If you have a
free subscription, those UI elements are not visible as they're ineffective.</p><p>For users with Premium subscriptions, Tune can be used as a standalone player by selecting the
appropriate option in the device switch section in the mini player (note that <a href="https://developer.spotify.com/documentation/web-playback-sdk/#supported-browsers">only some browsers are
supported</a>).</p><h1>Screenshots</h1><h2 id="album-details" class="section-heading">
  <a href="#album-details" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Album details
</h2>
<p><img src="https://raw.githubusercontent.com/fully-forged/tune/main/screenshots/album-details.jpg" alt="Album details" title="Album details"></img></p><h2 id="global-search" class="section-heading">
  <a href="#global-search" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Global Search
</h2>
<p><img src="https://raw.githubusercontent.com/fully-forged/tune/main/screenshots/search.jpg" alt="Search" title="Search"></img></p><h2 id="artist-details" class="section-heading">
  <a href="#artist-details" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Artist details
</h2>
<p><img src="https://raw.githubusercontent.com/fully-forged/tune/main/screenshots/artist-details.jpg" alt="Artist details" title="Artist details"></img></p><h2 id="top-albums-and-recommendations" class="section-heading">
  <a href="#top-albums-and-recommendations" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Top albums and recommendations
</h2>
<p><img src="https://raw.githubusercontent.com/fully-forged/tune/main/screenshots/top-albums-and-recommendations.jpg" alt="Top albums and recommendations" title="Top albums and recommendations"></img></p><h2 id="release-radar" class="section-heading">
  <a href="#release-radar" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Release radar
</h2>
<p><img src="https://raw.githubusercontent.com/fully-forged/tune/main/screenshots/release-radar.jpg" alt="Release radar" title="Release radar"></img></p><h1>Initial setup</h1><p>First of all, we need working installations of Elixir and Erlang. The
recommended way to achieve this is via <a href="https://asdf-vm.com/#/">asdf</a>. Once
it's installed and working, you can run <code class="inline">asdf install</code> from the project root to
install the correct versions required (see the <code class="inline">.tool-versions</code> file for
details).</p><p>Next, make sure you setup the required environment variables as detailed in
<code class="inline">.env</code> by copying the file to <code class="inline">.env.local</code> and adjusting values as needed.</p><p>Please see the <a href="https://hexdocs.pm/vapor/Vapor.Provider.Dotenv.html#content">Vapor
docs</a> for more
detail on the dotenv configuration provider.</p><p>To create secrets, (e.g. for <code class="inline">SECRET_KEY_BASE</code>), use <a href="https://hexdocs.pm/phoenix/Mix.Tasks.Phx.Gen.Secret.html"><code class="inline">mix phx.gen.secret</code></a>.</p><p>Next you can install all dependencies with <code class="inline">mix setup</code>.</p><h1>Workflows</h1><h2 id="development" class="section-heading">
  <a href="#development" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Development
</h2>
<ul><li>Start the application with <a href="https://hexdocs.pm/phoenix/Mix.Tasks.Phx.Server.html"><code class="inline">mix phx.server</code></a></li><li>To start the application and an IEx console connected to it, use <code class="inline">iex -S mix phx.server</code></li></ul><p>Now you can visit <a href="http://localhost:4000"><code class="inline">localhost:4000</code></a> from your browser.</p><h2 id="tests-dialyzer-and-credo" class="section-heading">
  <a href="#tests-dialyzer-and-credo" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Tests, dialyzer and credo
</h2>
<p>You can run tests with <a href="https://hexdocs.pm/mix/Mix.Tasks.Test.html"><code class="inline">mix test</code></a>, dialyzer with <a href="https://hexdocs.pm/dialyxir/Mix.Tasks.Dialyzer.html"><code class="inline">mix dialyzer</code></a> and Credo with <a href="https://hexdocs.pm/credo/Mix.Tasks.Credo.html"><code class="inline">mix credo</code></a>.</p><h2 id="deployment" class="section-heading">
  <a href="#deployment" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Deployment
</h2>
<p>The project is setup to deploy on Heroku, please make sure you:</p><ul><li>configure environment variables</li><li>add the buildpacks detailed at <a href="https://hexdocs.pm/phoenix/heroku.html">https://hexdocs.pm/phoenix/heroku.html</a></li><li>to enable exception tracking via <a href="https://sentry.io">Sentry</a>, make sure you define a <code class="inline">SENTRY_DSN</code> environment variable</li></ul><h1>Application structure</h1><p>The <code class="inline">Tune</code> namespace defines the domain logic responsible to interact with the
Spotify API and maintain running sessions for each logged-in user.</p><p>The <code class="inline">TuneWeb</code> namespace defines authentication endpoints and the main
<code class="inline">LiveView</code> (<a href="TuneWeb.ExplorerLive.html"><code class="inline">TuneWeb.ExplorerLive</code></a>) that powers the entire user interface.</p><p>Tune assumes multiple browser sessions for the same user, which is why it
defines a <a href="Tune.Spotify.Session.html"><code class="inline">Tune.Spotify.Session</code></a> behaviour with <a href="Tune.Spotify.Session.Worker.html"><code class="inline">Tune.Spotify.Session.Worker</code></a>
as its main runtime implementation.</p><p>Each worker is responsible to proxy interaction with the Spotify API, 
periodically poll for data changes, and broadcast corresponding events.</p><p>When a user opens a browser session, <a href="TuneWeb.ExplorerLive.html"><code class="inline">TuneWeb.ExplorerLive</code></a> either starts or
simply reuses a worker named with the same session ID.</p><p>Each worker monitors its subscribers, so that it can shutdown when a user
closes their last browser window.</p><p>This architecture ensures that:</p><ul><li>The amount of automatic API calls against the Spotify API for a given user is
constant and independent from the number of user sessions for the same user.</li><li>Credential renewal happens in the background</li><li>The explorer implementation remains entirely focused on UI interaction </li></ul><h1>Telemetry</h1><p>The application exposes <code class="inline">TuneWeb.Telemetry</code> module with definitions for relevant metrics.</p><p>An instance of
<a href="https://github.com/phoenixframework/phoenix_live_dashboard/">Phoenix.LiveDashboard</a>
is mounted at <code class="inline">/dashboard</code>. In production, the endpoint is protected by basic
auth (see <code class="inline">.env</code> for relevant environment variables).</p><h1>Limitations</h1><ul><li><p>If you use Tune in combination with official Spotify clients, you will notice
that if nothing is playing, after a while the miniplayer controls stop
responding and you can't even play any song. This is due to a quirk in the
Spotify devices API, which reports client devices as still connected.</p><p>If you're running Tune on a platform where it can load the built-in audio
player, you can just refresh the page for the player to reload, which has the
side effect of &quot;waking up&quot; all other clients as well. At that point, you can
select them from the device switcher and resume normal operation.
If you're running Tune on a mobile device, your only option is to open the
dormant client application, do a quick play/pause to wake it up and go back
to Tune.
More information on the related <a href="https://developer.spotify.com/documentation/web-api/guides/using-connect-web-api/#devices-not-appearing-on-device-list">Spotify documentation
page</a>.</p></li></ul><h1>Credits</h1><ul><li>Mini player icons from <a href="https://icons.getbootstrap.com/">Bootstrap Icons</a></li><li>Wikipedia icon made by <a href="https://www.flaticon.com/authors/freepik
"Freepik"">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></li><li>Last.fm icon made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel
perfect</a> from
<a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></li><li>YouTube icon made by <a href="https://www.flaticon.com/authors/freepik
"Freepik"">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></li></ul>      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.22.2),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>
          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>
<style>
  .content-inner code {
    font-family: IBM Plex Mono, Fira Code, Inconsolata,Menlo,Courier,monospace;
  }
</style>
  </body>
</html>
